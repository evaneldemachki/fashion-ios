<ActionBar title="Explore Items">
    <ActionItem tap="onShare" ios.systemIcon="9" ios.position="left" android.systemIcon="res://ic_menu_share" android.position="actionBar"></ActionItem>
    <ActionItem (tap)="onSearch($event)" ios.systemIcon="12" ios.position="right" text="search" android.position="popup"></ActionItem>
</ActionBar>
<BottomNavigation selectedIndex="0">
    <!-- The bottom tab UI is created via TabStrip (the containier) and TabStripItem (for each tab)-->
    <TabStrip>
        <TabStripItem>
            <Label text="Home"></Label>
            <Image src="font://&#xf015;" class="fas t-36"></Image>
        </TabStripItem>
        <TabStripItem class="special">
            <Label text="Outfits"></Label>
            <Image src="font://&#xf553;" class="fas t-36"></Image>
        </TabStripItem>
        <TabStripItem class="special">
            <Label text="Profile"></Label>
            <Image src="font://&#xf2bd;" class="fas t-36"></Image>
        </TabStripItem>
    </TabStrip>

    <!--Main Feed-->
    <TabContentItem>
        <StackLayout padding="2 0 2 2" backgroundColor="gray" margin="0">
            <SearchBar class="searchMenu" hint="Search for items ..." (textChange)="onTextChanged($event)"
            [text]="searchPhrase" (clear)="onClear($event)" (submit)="onSubmit($event)">
            </SearchBar>
            <RadListView [items]="categories" orientation="horizontal" height=50 
            multipleSelection="true" selectionBehavior="Press" 
            (itemSelected)="categorySelected($event)" (itemDeselected)="categoryDeselected($event)">
                <ListViewGridLayout tkListViewLayout scrollDirection="Horizontal" itemWidth="80" itemHeight="60" spanCount="1"></ListViewGridLayout>
                    <!-- When nesting ListView in ScrollView, make sure that the nested scrollable component has an explicitly set height -->
                <ng-template let-item="item">
                        <label textAlignment = "center" paddingTop="20" text= {{item}}></label>
                </ng-template>
            </RadListView>
            <ListPicker class="picker" style="visibility: collapse;"
            [items]="categories" (selectedIndexChange)="categoryPicker($event)">
            </ListPicker>
          
            <GridLayout rows="*,*,*,*,*,*,*,*,*,*,*" columns="*,*,*,*,*,*,*,*,*,*">
                <RadListView row="0" rowspan="11" col="0" colspan="10" orientation="vertical" [items]="itemsShown"
                width="100%" height="100%" (scrolled)="scrollStartedEvent($event)" loadOnDemandMode="Auto" (loadMoreDataRequested)="onLoadMoreItemsRequested($event)" loadOnDemandBufferSize="1"
                id="listView" selectionBehavior="None" 
                (itemSwipeProgressEnded)="onSwipeCellFinished($event)"
                (itemSwipeProgressStarted)="onSwipeCellStarted($event)" 
                (itemSwiping)="onItemSwiping" 
                swipeActions="true">
                    <ListViewGridLayout tkListViewLayout itemInsertAnimation="Scale" scrollDirection="Vertical" ios:itemWidth="186" ios:itemHeight="180"></ListViewGridLayout>
                    <ng-template horizontalAlignment="center" let-item="item" let-index="index" >
                        <GridLayout style="background-image: ~/item/backgroundShadow.png;" [class] = "itemsLiked[index] ? 'likedBackground' : 'dislikedBackground'">
                        <GridLayout columns="*,*,*" [nsRouterLink]="['detail', index]" 
                        [queryParams]="{ source: 'itemsShown', liked: itemsLiked[index], disliked: itemsDisliked[index], saved: itemsSaved[index]}" 
                        padding="0 0 0 0" >
                            <Image colspan="3" [src]="item.img[0]" height="186" ios:stretch="aspectFill" ></Image>
                            <StackLayout column="2" style="padding-right:2;">
                            <Label [class]="itemsLiked[index] ? 'far t-36' : 'invisible'" style="color: green;" text="&#xf004;" ></Label>
                            <Label [class]="itemsSaved[index] ? 'far t-36' : 'invisible'" style="color: green;" text="&#xf0c7;" ></Label>
                            </StackLayout>
                        </GridLayout>
                    </GridLayout>
                    </ng-template>
                    
                    <lv:RadListView.itemSwipeTemplate>
                        <GridLayout *tkListItemSwipeTemplate columns="auto, *, auto">
                            <StackLayout id="mark-view" col="0" style="background-color:red;" (tap)="onLeftSwipeClick($event)" orientation="horizontal">
                                <Label horizontalAlignment="center" class="far" style="font-size: 50em; color: black" text="&#xf165;"></Label>
                            </StackLayout>
                            <StackLayout id="delete-view" col="2" style="background-color: green;" (tap)="onRightSwipeClick($event)" orientation="horizontal">
                                <Label horizontalAlignment="center" class="far" style="font-size: 50em; color: black" text="&#xf004;"></Label>
                            </StackLayout>
                        </GridLayout>
                    </lv:RadListView.itemSwipeTemplate>
                </RadListView>

                <!--Tutorial Scroll-->
                <StackLayout row="5" rowspan="3" col="2" colspan="6" [class]="tutorialHide ? 'invisible' : 'visible'" style="background-image: ~/item/tutorialBackground.png; background-repeat: no-repeat;
                background-size: 100% 100%; padding-bottom: 10">
                    <Label textAlignment="center" text="Quick Tutorial:" style="font-size: 20; padding-top: 10;" ></Label>
                    <Label style="font-size: 14" textAlignment="center" textWrap="true" text="Your feed never runs out! Just keep scrolling!"></Label>
                    <Label style="font-size: 14" textAlignment="center" textWrap="true" text="Each item can be swiped Right (Like)"></Label>
                    <Label style="font-size: 14" textAlignment="center" textWrap="true" text="or Left (Dislike)"></Label>
                </StackLayout>

                <!--Tutorial Scroll-->
                <StackLayout row="9" rowspan="2" col="1" colspan="8" [class]="tutorialHide ? 'invisible' : 'visible'" style="background-image: ~/item/tutorialBackground.png; background-repeat: no-repeat;
                background-size: 100% 100%; padding-bottom: 10">
                    <Label style="font-size: 17; padding-top: 10;" textAlignment="center" textWrap="true" text="The more you rate the clothes that come, the better our algorithm will match you with your perfect style"></Label>
                </StackLayout>

                <!--Category Tutorial-->
                <StackLayout row="0" rowspan="1" col="6" colspan="3" [class]="tutorialHide ? 'invisible' : 'visible'" style="font-weight: bold; color: black; background-image: ~/item/tutorialBackground2.png; background-repeat: no-repeat;
                background-size: 100% 100%;">
                    <Label size="20" textWrap="true" textAlignment="center" text="You can sort by any category up here" style="padding-top: 10"></Label>
                </StackLayout>
            </GridLayout>
        </StackLayout>
    </TabContentItem>

    <!--Outfit Creator-->
    <TabContentItem>
        <StackLayout padding="2 0 2 6" backgroundColor="gray" margin="0">
            <GridLayout rows="*,*,*,*,*,*,*,*,*,*,*,*" columns="*,*,*,*,*,*,*,*,*,*">
                    <Button row="0" column="0" colspan="4" [text]="filterBySaved? 'Saved' : 'Likes'" (tap)="swapFilterSaved()" width="100%"></Button>
                    <RadListView style="margin-right:15;" row="0" column="4" colspan="7" [items]="categories" orientation="horizontal" height=50 width="100%"
                    multipleSelection="false" selectionBehavior="Press" 
                    (itemSelected)="outfitCategorySelected($event)" (itemDeselected)="outfitCategoryDeselected($event)">
                    <ListViewGridLayout tkListViewLayout scrollDirection="Horizontal" itemWidth="90" itemHeight="60" spanCount="1"></ListViewGridLayout>
                        <!-- When nesting ListView in ScrollView, make sure that the nested scrollable component has an explicitly set height -->
                    <ng-template let-item="item" height=50>
                            <label verticalAlignment="center" textAlignment = "center" padding="20" text= {{item}} textWrap="true"></label>
                    </ng-template>
                    </RadListView>
                
                <!--Liked or Saved List outfitCreaterList-->
                <RadListView col="0" colspan="4" row="1" rowspan="11" [items]="outfitCreaterList" orientation="Vertical" height=50 
                    multipleSelection="false" selectionBehavior="Press" height ="100%"
                    (itemSelected)="createrSelected($event)">
                        <ListViewLinearLayout tkListViewLayout scrollDirection="Vertical"></ListViewLinearLayout>
                        <ng-template let-item="item" let-index="index">
                            <StackLayout>
                                <Image [src]="item.img[0]" height="100" width = "100" ios:stretch="aspectFill"></Image>
                                <Label textAlignment = "center" size = "15" width="100%" [text]="item.name" textWrap="true"></Label>
                            </StackLayout>
                        </ng-template>
                </RadListView>    
                
                <RadListView row="1" rowspan="10" col="4" colspan="10" style="margin-right: 5;" [items]="currentlyChosen" orientation="Vertical" height="100%" selectionBehavior="Press" (itemSelected)="createrDeselected($event)">
                    <ListViewGridLayout style="padding-right: 10;" tkListViewLayout scrollDirection="Vertical" itemWidth="120" itemHeight="150" spanCount="2"></ListViewGridLayout>
                    <ng-template let-item="item">
                        <StackLayout>
                            <Image [src]="item.img[0]" height="100" width = "100" ios:stretch="aspectFill"></Image>
                            <Label textAlignment = "center" size = "13" width="100%" [text]="item.name" textWrap="true"></Label>
                        </StackLayout>
                    </ng-template>
                </RadListView>

                <StackLayout row="11" col="4" colspan="10" style="padding-bottom: 10;">
                    <button verticalAlignment = "bottom" text="Save Outfit" (tap)="saveOutfit()"></button>
                </StackLayout>
                <!--[class]="outfitTutorialHide ? 'invisible' : 'visible'"-->
                <StackLayout [class]="outfitTutorialHide ? 'invisible' : 'visible'" row="1" rowspan="1" col="4" colspan="8" style="font-weight: bold; color: black; padding-left: 5;padding-right: 5; padding-bottom: 10; background-image:  ~/item/tutorialBackground2.png; background-repeat: no-repeat; background-size: 100% 100%;">
                    <Label style="font-size: 12; padding-top: 10;" textAlignment="center" textWrap="true" text="Tap your clothes, build your perfect outfit"></Label>
                </StackLayout>

            </GridLayout>
        </StackLayout>

    <!--Profile Screen-->
    </TabContentItem>
    <TabContentItem>
        <Gridlayout padding="2 0 2 2" rows = "*,*,*" id="accountMenu" margin="0"> 
            <StackLayout row="0">
                <Image [src] = "userIcon" height="70%" width = "70%"></Image>
            </StackLayout>    
            <ScrollView row="1" rowspan="2" orientation="vertical">
                <StackLayout>
                        <Button class="profile" textAlignment = "center" text="My Liked"></Button>
                        <RadListView height ="200" row="0" orientation="horizontal" [items]="userLikes" margin-left = "2" margin-right="2">
                            <ListViewLinearLayout tkListViewLayout scrollDirection="Horizontal"></ListViewLinearLayout>
                            <ng-template let-item="item" let-index="index">
                                <StackLayout [nsRouterLink]="['detail', index]" 
                                [queryParams]="{ source: 'userLikes', liked: true, disliked: false }">
                                    <Image [src]="item.img[0]" height="80%" width = "80%" ios:stretch="aspectFill"></Image>
                                    <Label textAlignment = "center" size = "15" width="100%" [text]="item.name" textWrap="true"></Label>
                                </StackLayout>
                            </ng-template>
                        </RadListView>
                        <Button text = "My Saved Items"></Button>
                        <RadListView height ="200" row="0" orientation="horizontal" [items]="userSaved" margin-left = "2" margin-right="2">
                            <ListViewLinearLayout tkListViewLayout scrollDirection="Horizontal"></ListViewLinearLayout>
                            <ng-template let-item="item" let-index="index">
                                <StackLayout [nsRouterLink]="['detail', index]" 
                                [queryParams]="{ source: 'userSaved', liked: true, disliked: false }">
                                    <Image [src]="item.img[0]" height="80%" width = "80%" ios:stretch="aspectFill"></Image>
                                    <Label textAlignment = "center" size = "15" width="100%" [text]="item.name" textWrap="true"></Label>
                                </StackLayout>
                            </ng-template>
                        </RadListView>
                        <Button text = "My Outfits"></Button>
                        <RadListView height ="200" row="0" orientation="horizontal" [items]="myOutfits" margin-left = "2" margin-right="2">
                            <ListViewLinearLayout tkListViewLayout scrollDirection="Horizontal"></ListViewLinearLayout>
                            <ng-template let-item="item" let-index="index">
                                <StackLayout [nsRouterLink]="['detail', index]" 
                                [queryParams]="{ source: 'userSaved', liked: true, disliked: false }">
                                    <Image [src]="item.img[0]" height="80%" width = "80%" ios:stretch="aspectFill"></Image>
                                    <Label textAlignment = "center" size = "15" width="100%" [text]="item.outfitID" textWrap="true"></Label>
                                </StackLayout>
                            </ng-template>
                        </RadListView>
                </StackLayout>
            </ScrollView>
        </Gridlayout>
    </TabContentItem>
</BottomNavigation>